KISSY.add("kg/vc-modal/1.1.0/index",["base","node","event","promise","ua","kg/xtemplate/3.3.3/runtime","kg/vc-modal/1.1.0/index.css"],function(e,t,a,n){{var o,i,l=t("base"),r=t("node"),s=t("event"),d=t("promise"),c=t("ua"),f=t("kg/xtemplate/3.3.3/runtime");t("kg/vc-modal/1.1.0/index.css")}o=function(e){var t=e=function(e){function t(e,t,a){var n=e.data,i=e.affix;t.data+='\n                <p class="modal-title">',d.line=7;var l=(o=i.title)!==a?o:(o=n.title)!==a?o:e.resolveLooseUp(["title"]);return t=t.write(l),t.data+="</P>\n                ",t}function a(e,t,a){var n=e.data,i=e.affix;t.data+="\n                  ",d.line=15;var l=(o=i.otherBtn)!==a?o:(o=n.otherBtn)!==a?o:e.resolveLooseUp(["otherBtn"]);return t=t.write(l),t.data+="\n                ",t}function n(e,t,a){var n=e.data,i=e.affix;t.data+='\n                <a class="btn btn-confirm">',d.line=18;var l=(o=i.confirmBtn)!==a?o:(o=n.confirmBtn)!==a?o:e.resolveLooseUp(["confirmBtn"]);return t=t.writeEscaped(l),t.data+="</a>\n                ",t}{var o,i=this,l=i.root,r=i.buffer,s=i.scope,d=(i.runtime,i.name,i.pos),c=s.data,f=s.affix,m=l.nativeCommands,v=l.utils,h=(v.callFn,v.callCommand,m.range,m.foreach,m.forin,m.each,m["with"],m["if"]);m.set,m.include,m.parse,m.extend,m.block,m.macro,m["debugger"]}r.data+='<div class="vc-modal';var u=" ",p=(o=f.cls)!==e?o:(o=c.cls)!==e?o:s.resolveLooseUp(["cls"]);u=" "+p,r=r.writeEscaped(u),r.data+='"  tabindex="-1">\n    <div class="modal-dialog';var g=" ";d.line=2;var B=(o=f.effect)!==e?o:(o=c.effect)!==e?o:s.resolveLooseUp(["effect"]);g=" "+B,r=r.writeEscaped(g),r.data+='">\n        <div class="modal-content">\n            <div class="modal-header">\n                <i class="close vc-modal-iconfont">&#xe600;</i>\n                ',d.line=6,d.line=6;var b=(o=f.title)!==e?o:(o=c.title)!==e?o:s.resolveLooseUp(["title"]);r=h.call(i,s,{params:[b],fn:t},r),r.data+='\n            </div>\n            <div class="modal-body">\n              ',d.line=11;var $=(o=f.content)!==e?o:(o=c.content)!==e?o:s.resolveLooseUp(["content"]);r=r.write($),r.data+='\n            </div>\n            <div class="modal-footer">\n                ',d.line=14,d.line=14;var w=(o=f.otherBtn)!==e?o:(o=c.otherBtn)!==e?o:s.resolveLooseUp(["otherBtn"]);r=h.call(i,s,{params:[w],fn:a},r),r.data+="\n                ",d.line=17,d.line=17;var x=(o=f.confirmBtn)!==e?o:(o=c.confirmBtn)!==e?o:s.resolveLooseUp(["confirmBtn"]);r=h.call(i,s,{params:[x],fn:n},r),r.data+='\n                <a class="btn btn-close">',d.line=20;var k=(o=f.cancelBtn)!==e?o:(o=c.cancelBtn)!==e?o:s.resolveLooseUp(["cancelBtn"]);return r=r.writeEscaped(k),r.data+="</a>\n            </div>\n        </div>\n    </div>\n\n</div>\n",r};return t.TPL_NAME=n.id||n.name,e}(),i=function(t){function a(e,t){var a=new u(e);return a.render(t)}var n=l,i=r,m=(r.all,s),v=d,h=c,u=f,p=o,g=(i.all,{effect:"fadeInDown",cls:"",title:"确认",cancelBtn:"关闭"}),B=i.one("body");return t=n.extend({renderAppend:function(t,n){var o=this;t=t||o.get("tpl"),n=n||o.get("data");var i=a(t,n),l=e.one(i);B.append(l),o.fire("render",{$modal:l}),this.$modal=l,this.$dialog=l.one(".modal-dialog")},initializer:function(){var t=this;this.autoHide=!0;var a=this.get("effect"),n=this.get("cls"),o=this.get("title"),l=this.get("content"),r=this.get("confirmBtn"),s=this.get("cancelBtn"),d=(this.get("otherBtn"),{});a&&(d.effect=a),n&&(d.cls=n),o&&(d.title=o),l&&(d.content=l),r&&(d.confirmBtn=r),s&&(d.cancelBtn=s);var c=e.merge(g,d);this.set("data",c),this.get("tpl")||this.set("tpl",p),this.renderAppend(),this.$modal.on("click",function(e){var a=i.one(e.target);a.hasClass("vc-modal")&&t.hide()}),m.delegate(this.$modal,"click",".close",function(e){e.preventDefault(),t.hide()});this.get("confirmFun"),this.get("closeFun");m.delegate(this.$modal,"click",".btn-confirm",function(e){t.fire("confirm.modal",{modal:t.$modal}),e.preventDefault(),t.autoHide&&t.defer.resolve(),t.autoHide=!0}),m.delegate(this.$modal,"click",".btn-close",function(e){t.fire("cancel.modal",{modal:t.$modal}),e.preventDefault(),t.autoHide&&t.defer.reject(),t.autoHide=!0})},show:function(t,a,n){var o=this;e.isFunction(t)?t.call({modal:o.$modal}):e.isString(t)&&this.$modal.one(".modal-body").html(t);try{a&&a.call(this)}catch(i){console.error(i)}this.$modal.css("display","block"),document.body.offsetWidth,this.$modal.addClass("in"),B.addClass("modal-show");try{n&&n.call(this)}catch(i){console.error(i)}o.defer=new v.Defer;var l=o.defer.promise;return l.done(function(){o.hide()},function(){o.hide()}),l},hide:function(){var e=this;h.ie&&h.ie<=8?this.$modal.removeClass("in").removeAttr("style"):(this.$modal.removeClass("in"),setTimeout(function(){e.$modal.removeAttr("style"),B.removeClass("modal-show")},300))},closeAutoHide:function(){this.autoHide=!1}},{ATTRS:{tpl:{value:""},data:{value:{}}}})}(),n.exports=i});